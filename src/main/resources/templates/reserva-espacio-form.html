<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Reserva de Espacio</title>

    <!-- Bootstrap, opcional -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-4">

    <h2 class="mb-4" th:text="${reservaEspacio.idReservaEspacio} != null ?
                               'Editar reserva de espacio' :
                               'Nueva reserva de espacio'">
        Reserva de espacio
    </h2>

    <!-- Mensajes flash -->
    <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
    <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

    <!-- FORMULARIO -->
    <form th:action="@{/app/reservaespacios/guardar}"
          th:object="${reservaEspacio}"
          method="post">

        <!-- ID de la reserva (oculto para edición) -->
        <input type="hidden" th:field="*{idReservaEspacio}" />

        <!-- Fecha de la reserva -->
        <div class="mb-3">
            <label for="fechaReserva" class="form-label">Fecha de la reserva</label>
            <input type="date"
                   id="fechaReserva"
                   class="form-control"
                   th:field="*{fechaReserva}"
                   required />
        </div>

        <!-- Duración -->
        <div class="mb-3">
            <label for="duracion" class="form-label">Duración (minutos)</label>
            <input type="number"
                   id="duracion"
                   class="form-control"
                   th:field="*{duracion}"
                   min="1"
                   required />
        </div>

        <!-- Motivo -->
        <div class="mb-3">
            <label for="motivoReserva" class="form-label">Motivo de la reserva</label>
            <textarea id="motivoReserva"
                      class="form-control"
                      th:field="*{motivoReserva}"
                      rows="3"
                      required></textarea>
        </div>

        <!-- Ficha -->
        <div class="mb-3">
            <label for="ficha" class="form-label">Ficha</label>
            <select id="ficha"
                    class="form-select"
                    th:field="*{ficha}"
                    required>
                <option value="" disabled
                        th:selected="${reservaEspacio.ficha} == null">
                    Seleccione una ficha
                </option>
                <option th:each="f : ${listaFichas}"
                        th:value="${f.idFicha}"
                        th:text="${f.idFicha}"></option>
                <!-- Si quieres mostrar la descripción, puedes usar:
                     th:text="${f.idFicha + ' - ' + f.descripcion}"
                -->
            </select>
        </div>

        <!-- Usuario -->
        <div class="mb-3">
            <label for="usuario" class="form-label">Usuario</label>
            <select id="usuario"
                    class="form-select"
                    th:field="*{usuario}"
                    required>
                <option value="" disabled
                        th:selected="${reservaEspacio.usuario} == null">
                    Seleccione un usuario
                </option>
                <option th:each="u : ${listaUsuarios}"
                        th:value="${u.idUsuario}"
                        th:text="${u.nombres}"></option>
                <!-- Si tu entidad tiene también "apellidos", puedes usar:
                     th:text="${u.nombres + ' ' + u.apellidos}"
                -->
            </select>
        </div>

        <!-- Espacio -->
        <div class="mb-3">
            <label for="espacio" class="form-label">Espacio</label>
            <select id="espacio"
                    class="form-select"
                    th:field="*{espacio}"
                    required>
                <option value="" disabled
                        th:selected="${reservaEspacio.espacio} == null">
                    Seleccione un espacio
                </option>
                <option th:each="esp : ${listaEspacios}"
                        th:value="${esp.idEspacio}"
                        th:text="${esp.nombreDelEspacio}"></option>
            </select>
        </div>

        <!-- Botones -->
        <div class="d-flex justify-content-between mt-4">
            <a th:href="@{/app/reservaespacios}" class="btn btn-secondary">
                Volver al listado
            </a>
            <button type="submit" class="btn btn-success">
                Guardar
            </button>
        </div>

    </form>
</div>

</body>
</html>
